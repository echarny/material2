/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/animations"),require("@angular/cdk/a11y"),require("@angular/cdk/portal"),require("@angular/common"),require("@angular/core"),require("rxjs"),require("@angular/cdk/keycodes"),require("rxjs/operators"),require("@angular/cdk/overlay"),require("@angular/cdk/bidi")):"function"==typeof define&&define.amd?define("@angular/cdk-experimental/dialog",["exports","@angular/animations","@angular/cdk/a11y","@angular/cdk/portal","@angular/common","@angular/core","rxjs","@angular/cdk/keycodes","rxjs/operators","@angular/cdk/overlay","@angular/cdk/bidi"],e):e((t.ng=t.ng||{},t.ng["cdk-experimental"]=t.ng["cdk-experimental"]||{},t.ng["cdk-experimental"].dialog={}),t.ng.animations,t.ng.cdk.a11y,t.ng.cdk.portal,t.ng.common,t.ng.core,t.rxjs,t.ng.cdk.keycodes,t.rxjs.operators,t.ng.cdk.overlay,t.ng.cdk.bidi)}(this,function(t,e,o,n,r,i,a,s,l,c,p){"use strict";function u(t,e){function o(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}function d(){throw Error("Attempting to attach dialog content after content is already attached")}function f(t){return function(){return t.scrollStrategies.block()}}var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},g=function(){return g=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},g.apply(this,arguments)},y=function(){function t(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.minWidth="",this.minHeight="",this.maxWidth="80vw",this.maxHeight="",this.data=null,this.ariaDescribedBy=null,this.ariaLabel=null,this.autoFocus=!0}return t}(),_=function(t){function s(e,o,n,r,i){var s=t.call(this)||this;return s._elementRef=e,s._focusTrapFactory=o,s._changeDetectorRef=n,s._document=r,s._config=i,s._state="enter",s._elementFocusedBeforeDialogWasOpened=null,s._focusTrap=s._focusTrapFactory.create(s._elementRef.nativeElement,!1),s._beforeEnter=new a.Subject,s._afterEnter=new a.Subject,s._beforeExit=new a.Subject,s._afterExit=new a.Subject,s}return u(s,t),Object.defineProperty(s.prototype,"_ariaLabel",{get:function(){return this._config.ariaLabel||null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_ariaDescribedBy",{get:function(){return this._config.ariaDescribedBy},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_role",{get:function(){return this._config.role},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_tabindex",{get:function(){return-1},enumerable:!0,configurable:!0}),s.prototype.ngOnDestroy=function(){this._focusTrap.destroy()},s.prototype.attachComponentPortal=function(t){return this._portalHost.hasAttached()&&d(),this._savePreviouslyFocusedElement(),this._portalHost.attachComponentPortal(t)},s.prototype.attachTemplatePortal=function(t){return this._portalHost.hasAttached()&&d(),this._savePreviouslyFocusedElement(),this._portalHost.attachTemplatePortal(t)},s.prototype._onAnimationStart=function(t){"enter"===t.toState&&this._beforeEnter.next(),"enter"!==t.fromState||"void"!==t.toState&&"exit"!==t.toState||this._beforeExit.next()},s.prototype._onAnimationDone=function(t){"enter"===t.toState&&(this._autoFocusFirstTabbableElement(),this._afterEnter.next()),"enter"!==t.fromState||"void"!==t.toState&&"exit"!==t.toState||(this._returnFocusAfterDialog(),this._afterExit.next())},s.prototype._startExiting=function(){this._state="exit",this._changeDetectorRef.markForCheck()},s.prototype._savePreviouslyFocusedElement=function(){var t=this;this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,Promise.resolve().then(function(){return t._elementRef.nativeElement.focus()}))},s.prototype._autoFocusFirstTabbableElement=function(){var t=this;this._config.autoFocus&&this._focusTrap.focusInitialElementWhenReady().then(function(e){e||t._elementRef.nativeElement.focus()})},s.prototype._returnFocusAfterDialog=function(){var t=this._elementFocusedBeforeDialogWasOpened;t&&"function"==typeof t.focus&&t.focus()},s.decorators=[{type:i.Component,args:[{selector:"cdk-dialog-container",template:"<ng-template cdkPortalOutlet></ng-template>",styles:["cdk-dialog-container{background:#fff;border-radius:5px;display:block;padding:10px}"],encapsulation:i.ViewEncapsulation.None,changeDetection:i.ChangeDetectionStrategy.Default,animations:[e.trigger("dialog",[e.state("enter",e.style({opacity:1})),e.state("exit, void",e.style({opacity:0})),e.transition("* => *",e.animate(225))])],host:{"[@dialog]":"_state","(@dialog.start)":"_onAnimationStart($event)","(@dialog.done)":"_onAnimationDone($event)"}}]}],s.ctorParameters=function(){return[{type:i.ElementRef},{type:o.FocusTrapFactory},{type:i.ChangeDetectorRef},{type:void 0,decorators:[{type:i.Optional},{type:i.Inject,args:[r.DOCUMENT]}]},{type:y}]},s.propDecorators={_ariaLabel:[{type:i.HostBinding,args:["attr.aria-label"]}],_ariaDescribedBy:[{type:i.HostBinding,args:["attr.aria-describedby"]}],_role:[{type:i.HostBinding,args:["attr.role"]}],_tabindex:[{type:i.HostBinding,args:["attr.tabindex"]}],_portalHost:[{type:i.ViewChild,args:[n.PortalHostDirective]}]},s}(n.BasePortalOutlet),b=0,m=function(){function t(t,e,o){void 0===o&&(o="dialog-"+b++);var n=this;this._overlayRef=t,this._containerInstance=e,this.id=o,e._config.hasBackdrop&&t.backdropClick().subscribe(function(){n.disableClose||n.close()}),this.beforeClosed().subscribe(function(){n._overlayRef.detachBackdrop()}),this.afterClosed().subscribe(function(){n._overlayRef.detach(),n._overlayRef.dispose(),n.componentInstance=null}),t.keydownEvents().pipe(l.filter(function(t){return t.keyCode===s.ESCAPE&&!n.disableClose})).subscribe(function(){return n.close()})}return t.prototype.backdropClick=function(){return this._overlayRef.backdropClick()},t.prototype.close=function(t){this._result=t,this._containerInstance._startExiting()},t.prototype.updatePosition=function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this},t.prototype.keydownEvents=function(){return this._overlayRef.keydownEvents()},t.prototype.updateSize=function(t){return t.width&&this._getPositionStrategy().width(t.width.toString()),t.height&&this._getPositionStrategy().height(t.height.toString()),this._overlayRef.updateSize(t),this._overlayRef.updatePosition(),this},t.prototype._getPositionStrategy=function(){return this._overlayRef.getConfig().positionStrategy},t.prototype.beforeOpened=function(){return this._containerInstance._beforeEnter.asObservable()},t.prototype.afterOpened=function(){return this._containerInstance._afterEnter.asObservable()},t.prototype.beforeClosed=function(){var t=this;return this._containerInstance._beforeExit.pipe(l.map(function(){return t._result}))},t.prototype.afterClosed=function(){var t=this;return this._containerInstance._afterExit.pipe(l.map(function(){return t._result}))},t}(),v=new i.InjectionToken("DialogScrollStrategy"),D=new i.InjectionToken("DialogData"),C=new i.InjectionToken("DialogRef"),k=new i.InjectionToken("DialogConfig"),O=new i.InjectionToken("DialogContainer"),w={provide:v,deps:[c.Overlay],useFactory:f},j=function(){function t(t,e,o,n,r,i){var s=this;this.overlay=t,this.injector=e,this.dialogRefConstructor=o,this._scrollStrategy=n,this._parentDialog=r,this._afterAllClosedBase=new a.Subject,this.afterAllClosed=a.defer(function(){return s.openDialogs.length?s._afterAllClosed:s._afterAllClosed.pipe(l.startWith(void 0))}),this._afterOpened=new a.Subject,this._openDialogs=[],!r&&i&&i.subscribe(function(){return s.closeAll()})}return Object.defineProperty(t.prototype,"_afterAllClosed",{get:function(){return this._parentDialog?this._parentDialog.afterAllClosed:this._afterAllClosedBase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterOpened",{get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpened},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openDialogs",{get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogs},enumerable:!0,configurable:!0}),t.prototype.getById=function(t){return this._openDialogs.find(function(e){return e.id===t})},t.prototype.closeAll=function(){this.openDialogs.forEach(function(t){return t.close()})},t.prototype.openFromComponent=function(t,e){if(e=this._applyConfigDefaults(e),e.id&&this.getById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var o=this._createOverlay(e),n=this._attachDialogContainer(o,e),r=this._attachDialogContentForComponent(t,n,o,e);return this.registerDialogRef(r),r},t.prototype.openFromTemplate=function(t,e){if(e=this._applyConfigDefaults(e),e.id&&this.getById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var o=this._createOverlay(e),n=this._attachDialogContainer(o,e),r=this._attachDialogContentForTemplate(t,n,o,e);return this.registerDialogRef(r),r},t.prototype.registerDialogRef=function(t){var e=this;this.openDialogs.push(t);var o=t.afterOpened().subscribe(function(){e.afterOpened.next(t),o.unsubscribe()}),n=t.afterClosed().subscribe(function(){var o=e._openDialogs.indexOf(t);o>-1&&e._openDialogs.splice(o,1),e._openDialogs.length||(e._afterAllClosedBase.next(),n.unsubscribe())})},t.prototype._createOverlay=function(t){var e=new c.OverlayConfig({positionStrategy:this.overlay.position().global(),scrollStrategy:this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight});return t.backdropClass&&(e.backdropClass=t.backdropClass),this.overlay.create(e)},t.prototype._attachDialogContainer=function(t,e){var o=e.containerComponent||this.injector.get(O),r=e&&e.viewContainerRef&&e.viewContainerRef.injector,i=new n.PortalInjector(r||this.injector,new WeakMap([[y,e]])),a=new n.ComponentPortal(o,e.viewContainerRef,i),s=t.attach(a);return s.instance._config=e,s.instance},t.prototype._attachDialogContentForComponent=function(t,e,o,r){var i=new this.dialogRefConstructor(o,e,r.id),a=this._createInjector(r,i,e),s=e.attachComponentPortal(new n.ComponentPortal(t,void 0,a));return i.componentInstance=s.instance,i.updateSize({width:r.width,height:r.height}).updatePosition(r.position),i},t.prototype._attachDialogContentForTemplate=function(t,e,o,r){var i=new this.dialogRefConstructor(o,e,r.id);return e.attachTemplatePortal(new n.TemplatePortal(t,null,{$implicit:r.data,dialogRef:i})),i.updateSize({width:r.width,height:r.height}).updatePosition(r.position),i},t.prototype._createInjector=function(t,e,o){var r=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=new WeakMap([[this.injector.get(C),e],[this.injector.get(O),o],[D,t.data]]);return!t.direction||r&&r.get(p.Directionality,null)||i.set(p.Directionality,{value:t.direction,change:a.of()}),new n.PortalInjector(r||this.injector,i)},t.prototype._applyConfigDefaults=function(t){var e=this.injector.get(k);return g({},new e,t)},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:c.Overlay},{type:i.Injector},{type:void 0,decorators:[{type:i.Inject,args:[C]}]},{type:void 0,decorators:[{type:i.Inject,args:[v]}]},{type:t,decorators:[{type:i.Optional},{type:i.SkipSelf}]},{type:r.Location,decorators:[{type:i.Optional}]}]},t}(),x=m,R=_,E=y,P=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{imports:[r.CommonModule,c.OverlayModule,n.PortalModule,o.A11yModule],exports:[_],declarations:[_],providers:[j,w,{provide:C,useValue:x},{provide:O,useValue:R},{provide:k,useValue:E}],entryComponents:[_]}]}],t}();t.throwDialogContentAlreadyAttachedError=d,t.CdkDialogContainer=_,t.DialogConfig=y,t.DialogRef=m,t.Dialog=j,t.DialogModule=P,t.DIALOG_SCROLL_STRATEGY=v,t.DIALOG_DATA=D,t.DIALOG_REF=C,t.DIALOG_CONFIG=k,t.DIALOG_CONTAINER=O,t.MAT_DIALOG_SCROLL_STRATEGY_PROVIDER_FACTORY=f,t.MAT_DIALOG_SCROLL_STRATEGY_PROVIDER=w,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-experimental-dialog.umd.min.js.map
