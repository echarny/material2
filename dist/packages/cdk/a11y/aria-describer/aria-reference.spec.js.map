{"version":3,"file":"aria-reference.spec.js","sourceRoot":"","sources":["../../../../../src/cdk/a11y/aria-describer/aria-reference.spec.ts"],"names":[],"mappings":";;AAAA,mDAAkG;AAElG,QAAQ,CAAC,eAAe,EAAE;IACxB,IAAI,WAA+B,CAAC;IAEpC,UAAU,CAAC;QACT,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC5C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;KACxC,CAAC,CAAC;IAEH,SAAS,CAAC;QACR,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA,WAAY,CAAA,CAAC,CAAC;KACzC,CAAC,CAAC;IAEH,EAAE,CAAC,oDAAoD,EAAE;QACvD,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,aAAa,CAAC,CAAC;QACrE,SAAS,CAAC,kBAAkB,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;QAE/C,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,aAAa,CAAC,CAAC;QACrE,SAAS,CAAC,kBAAkB,EAAE,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC,CAAC;QAE9D,uCAAsB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,aAAa,CAAC,CAAC;QACxE,SAAS,CAAC,kBAAkB,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;QAE/C,uCAAsB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,aAAa,CAAC,CAAC;QACxE,SAAS,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;KACnC,CAAC,CAAC;IAEH,EAAE,CAAC,2DAA2D,EAAE;QAC9D,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,oBAAoB,CAAC,CAAC;QAC5E,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,oBAAoB,CAAC,CAAC;QAC5E,SAAS,CAAC,kBAAkB,EAAE,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC,CAAC;QAE9D,uCAAsB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,mBAAmB,CAAC,CAAC;QAC9E,SAAS,CAAC,kBAAkB,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;QAE/C,uCAAsB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,mBAAmB,CAAC,CAAC;QAC9E,SAAS,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;KACnC,CAAC,CAAC;IAEH,EAAE,CAAC,4BAA4B,EAAE;QAC/B,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAC5D,SAAS,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;KACnC,CAAC,CAAC;IAEH,EAAE,CAAC,2DAA2D,EAAE;QAC9D,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,aAAa,CAAC,CAAC;QACrE,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,EAAE,aAAa,CAAC,CAAC;QACrE,MAAM,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;KACzB,CAAC,CAAC;IAEH,EAAE,CAAC,8DAA8D,EAAE;QACjE,WAAY,CAAC,YAAY,CAAC,kBAAkB,EAAE,8BAA8B,CAAC,CAAC;QAC9E,MAAM,CAAC,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,kBAAkB,CAAC,CAAC;aACxD,OAAO,CAAC,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC,CAAC;KAC9C,CAAC,CAAC;;;;;;IAOH,mBAAmB,IAAY,EAAE,GAAa;QAC5C,MAAM,CAAC,oCAAmB,CAAC,CAAA,WAAY,CAAA,EAAE,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC7D,MAAM,CAAC,WAAY,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;KAC/E;CACF,CAAC,CAAC","sourcesContent":["import {addAriaReferencedId, getAriaReferenceIds, removeAriaReferencedId} from './aria-reference';\r\n\r\ndescribe('AriaReference', () => {\r\n  let testElement: HTMLElement | null;\r\n\r\n  beforeEach(() => {\r\n    testElement = document.createElement('div');\r\n    document.body.appendChild(testElement);\r\n  });\r\n\r\n  afterEach(() => {\r\n    document.body.removeChild(testElement!);\r\n  });\r\n\r\n  it('should be able to append/remove aria reference IDs', () => {\r\n    addAriaReferencedId(testElement!, 'aria-describedby', 'reference_1');\r\n    expectIds('aria-describedby', ['reference_1']);\r\n\r\n    addAriaReferencedId(testElement!, 'aria-describedby', 'reference_2');\r\n    expectIds('aria-describedby', ['reference_1', 'reference_2']);\r\n\r\n    removeAriaReferencedId(testElement!, 'aria-describedby', 'reference_1');\r\n    expectIds('aria-describedby', ['reference_2']);\r\n\r\n    removeAriaReferencedId(testElement!, 'aria-describedby', 'reference_2');\r\n    expectIds('aria-describedby', []);\r\n  });\r\n\r\n  it('should trim whitespace when adding/removing reference IDs', () => {\r\n    addAriaReferencedId(testElement!, 'aria-describedby', '    reference_1   ');\r\n    addAriaReferencedId(testElement!, 'aria-describedby', '    reference_2   ');\r\n    expectIds('aria-describedby', ['reference_1', 'reference_2']);\r\n\r\n    removeAriaReferencedId(testElement!, 'aria-describedby', '   reference_1   ');\r\n    expectIds('aria-describedby', ['reference_2']);\r\n\r\n    removeAriaReferencedId(testElement!, 'aria-describedby', '   reference_2   ');\r\n    expectIds('aria-describedby', []);\r\n  });\r\n\r\n  it('should ignore empty string', () => {\r\n    addAriaReferencedId(testElement!, 'aria-describedby', '  ');\r\n    expectIds('aria-describedby', []);\r\n  });\r\n\r\n  it('should not add the same reference id if it already exists', () => {\r\n    addAriaReferencedId(testElement!, 'aria-describedby', 'reference_1');\r\n    addAriaReferencedId(testElement!, 'aria-describedby', 'reference_1');\r\n    expect(['reference_1']);\r\n  });\r\n\r\n  it('should retrieve ids that are deliminated by extra whitespace', () => {\r\n    testElement!.setAttribute('aria-describedby', 'reference_1      reference_2');\r\n    expect(getAriaReferenceIds(testElement!, 'aria-describedby'))\r\n        .toEqual(['reference_1', 'reference_2']);\r\n  });\r\n\r\n  /**\r\n   * Expects the equal array from getAriaReferenceIds and a space-deliminated list from\r\n   * the actual element attribute. If ids is empty, assumes the element should not have any\r\n   * value\r\n   */\r\n  function expectIds(attr: string, ids: string[]) {\r\n    expect(getAriaReferenceIds(testElement!, attr)).toEqual(ids);\r\n    expect(testElement!.getAttribute(attr)).toBe(ids.length ? ids.join(' ') : '');\r\n  }\r\n});\r\n"]}