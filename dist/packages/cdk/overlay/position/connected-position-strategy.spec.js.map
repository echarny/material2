{"version":3,"file":"connected-position-strategy.spec.js","sourceRoot":"","sources":["../../../../../src/cdk/overlay/position/connected-position-strategy.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import {ComponentPortal, PortalModule} from '@angular/cdk/portal';\r\nimport {CdkScrollable, ScrollingModule} from '@angular/cdk/scrolling';\r\nimport {MockNgZone} from '@angular/cdk/testing';\r\nimport {Component, ElementRef, NgModule, NgZone} from '@angular/core';\r\nimport {inject, TestBed} from '@angular/core/testing';\r\nimport {Subscription} from 'rxjs';\r\nimport {\r\n  ConnectedOverlayPositionChange,\r\n  ConnectedPositionStrategy,\r\n  ConnectionPositionPair,\r\n  Overlay,\r\n  OverlayContainer,\r\n  OverlayModule,\r\n  OverlayRef,\r\n} from '../index';\r\n\r\n\r\n// Default width and height of the overlay and origin panels throughout these tests.\r\nconst DEFAULT_HEIGHT = 30;\r\nconst DEFAULT_WIDTH = 60;\r\n\r\n// For all tests, we assume the browser window is 1024x786 (outerWidth x outerHeight).\r\n// The karma config has been set to this for local tests, and it is the default size\r\n// for tests on CI (both SauceLabs and Browserstack).\r\n\r\ndescribe('ConnectedPositionStrategy', () => {\r\n  let overlay: Overlay;\r\n  let overlayContainer: OverlayContainer;\r\n  let zone: MockNgZone;\r\n  let overlayRef: OverlayRef;\r\n\r\n  beforeEach(() => {\r\n    TestBed.configureTestingModule({\r\n      imports: [ScrollingModule, OverlayModule, OverlayTestModule],\r\n      providers: [{provide: NgZone, useFactory: () => zone = new MockNgZone()}]\r\n    });\r\n\r\n    inject([Overlay, OverlayContainer], (o: Overlay, oc: OverlayContainer) => {\r\n      overlay = o;\r\n      overlayContainer = oc;\r\n    })();\r\n  });\r\n\r\n  afterEach(() => {\r\n    overlayContainer.ngOnDestroy();\r\n\r\n    if (overlayRef) {\r\n      overlayRef.dispose();\r\n    }\r\n  });\r\n\r\n  function attachOverlay(positionStrategy: ConnectedPositionStrategy) {\r\n    overlayRef = overlay.create({positionStrategy});\r\n    overlayRef.attach(new ComponentPortal(TestOverlay));\r\n    zone.simulateZoneExit();\r\n  }\r\n\r\n  describe('with origin on document body', () => {\r\n    const ORIGIN_HEIGHT = DEFAULT_HEIGHT;\r\n    const ORIGIN_WIDTH = DEFAULT_WIDTH;\r\n    const OVERLAY_HEIGHT = DEFAULT_HEIGHT;\r\n    const OVERLAY_WIDTH = DEFAULT_WIDTH;\r\n\r\n    let originElement: HTMLElement;\r\n    let positionStrategy: ConnectedPositionStrategy;\r\n    let fakeElementRef: ElementRef;\r\n\r\n    let originRect: ClientRect | null;\r\n    let originCenterX: number | null;\r\n    let originCenterY: number | null;\r\n\r\n    beforeEach(() => {\r\n      // The origin and overlay elements need to be in the document body in order to have geometry.\r\n      originElement = createPositionedBlockElement();\r\n      document.body.appendChild(originElement);\r\n      fakeElementRef = new ElementRef(originElement);\r\n    });\r\n\r\n    afterEach(() => {\r\n      document.body.removeChild(originElement);\r\n\r\n      // Reset the origin geometry after each test so we don't accidently keep state between tests.\r\n      originRect = null;\r\n      originCenterX = null;\r\n      originCenterY = null;\r\n    });\r\n\r\n    describe('when not near viewport edge, not scrolled', () => {\r\n      // Place the original element close to the center of the window.\r\n      // (1024 / 2, 768 / 2). It's not exact, since outerWidth/Height includes browser\r\n      // chrome, but it doesn't really matter for these tests.\r\n      const ORIGIN_LEFT = 500;\r\n      const ORIGIN_TOP = 350;\r\n\r\n      beforeEach(() => {\r\n        originElement.style.left = `${ORIGIN_LEFT}px`;\r\n        originElement.style.top = `${ORIGIN_TOP}px`;\r\n\r\n        originRect = originElement.getBoundingClientRect();\r\n        originCenterX = originRect.left + (ORIGIN_WIDTH / 2);\r\n        originCenterY = originRect.top + (ORIGIN_HEIGHT / 2);\r\n      });\r\n\r\n      // Preconditions are set, now just run the full set of simple position tests.\r\n      runSimplePositionTests();\r\n    });\r\n\r\n    describe('when scrolled', () => {\r\n      // Place the original element decently far outside the unscrolled document (1024x768).\r\n      const ORIGIN_LEFT = 2500;\r\n      const ORIGIN_TOP = 2500;\r\n\r\n      // Create a very large element that will make the page scrollable.\r\n      let veryLargeElement: HTMLElement = document.createElement('div');\r\n      veryLargeElement.style.width = '4000px';\r\n      veryLargeElement.style.height = '4000px';\r\n\r\n      beforeEach(() => {\r\n        // Scroll the page such that the origin element is roughly in the\r\n        // center of the visible viewport (2500 - 1024/2, 2500 - 768/2).\r\n        document.body.appendChild(veryLargeElement);\r\n        document.body.scrollTop = 2100;\r\n        document.body.scrollLeft = 2100;\r\n\r\n        originElement.style.top = `${ORIGIN_TOP}px`;\r\n        originElement.style.left = `${ORIGIN_LEFT}px`;\r\n\r\n        originRect = originElement.getBoundingClientRect();\r\n        originCenterX = originRect.left + (ORIGIN_WIDTH / 2);\r\n        originCenterY = originRect.top + (ORIGIN_HEIGHT / 2);\r\n      });\r\n\r\n      afterEach(() => {\r\n        document.body.removeChild(veryLargeElement);\r\n        document.body.scrollTop = 0;\r\n        document.body.scrollLeft = 0;\r\n      });\r\n\r\n      // Preconditions are set, now just run the full set of simple position tests.\r\n      runSimplePositionTests();\r\n    });\r\n\r\n    describe('when near viewport edge', () => {\r\n      it('should reposition the overlay if it would go off the top of the screen', () => {\r\n        // We can use the real ViewportRuler in this test since we know that zero is\r\n        // always the top of the viewport.\r\n\r\n        originElement.style.top = '5px';\r\n        originElement.style.left = '200px';\r\n        originRect = originElement.getBoundingClientRect();\r\n\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'end', originY: 'top'},\r\n            {overlayX: 'end', overlayY: 'bottom'})\r\n            .withFallbackPosition(\r\n                {originX: 'start', originY: 'bottom'},\r\n                {overlayX: 'start', overlayY: 'top'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect.bottom));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect.left));\r\n      });\r\n\r\n      it('should reposition the overlay if it would go off the left of the screen', () => {\r\n        // We can use the real ViewportRuler in this test since we know that zero is\r\n        // always the left edge of the viewport.\r\n\r\n        originElement.style.top = '200px';\r\n        originElement.style.left = '5px';\r\n        originRect = originElement.getBoundingClientRect();\r\n        originCenterY = originRect.top + (ORIGIN_HEIGHT / 2);\r\n\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'end', overlayY: 'top'})\r\n            .withFallbackPosition(\r\n                {originX: 'end', originY: 'center'},\r\n                {overlayX: 'start', overlayY: 'center'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originCenterY - (OVERLAY_HEIGHT / 2)));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect.right));\r\n      });\r\n\r\n      it('should reposition the overlay if it would go off the bottom of the screen', () => {\r\n        originElement.style.bottom = '25px';\r\n        originElement.style.left = '200px';\r\n        originRect = originElement.getBoundingClientRect();\r\n\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'start', overlayY: 'top'})\r\n            .withFallbackPosition(\r\n                {originX: 'end', originY: 'top'},\r\n                {overlayX: 'end', overlayY: 'bottom'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.bottom)).toBe(Math.floor(originRect.top));\r\n        expect(Math.floor(overlayRect.right)).toBe(Math.floor(originRect.right));\r\n      });\r\n\r\n      it('should reposition the overlay if it would go off the right of the screen', () => {\r\n        originElement.style.top = '200px';\r\n        originElement.style.right = '25px';\r\n        originRect = originElement.getBoundingClientRect();\r\n\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'end', originY: 'center'},\r\n            {overlayX: 'start', overlayY: 'center'})\r\n            .withFallbackPosition(\r\n                {originX: 'start', originY: 'bottom'},\r\n                {overlayX: 'end', overlayY: 'top'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect.bottom));\r\n        expect(Math.floor(overlayRect.right)).toBe(Math.floor(originRect.left));\r\n      });\r\n\r\n      it('should recalculate and set the last position with recalculateLastPosition()', () => {\r\n        // Push the trigger down so the overlay doesn't have room to open on the bottom.\r\n        originElement.style.bottom = '25px';\r\n        originRect = originElement.getBoundingClientRect();\r\n\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'start', overlayY: 'top'})\r\n            .withFallbackPosition(\r\n                {originX: 'start', originY: 'top'},\r\n                {overlayX: 'start', overlayY: 'bottom'});\r\n\r\n        // This should apply the fallback position, as the original position won't fit.\r\n        attachOverlay(positionStrategy);\r\n\r\n        // Now make the overlay small enough to fit in the first preferred position.\r\n        overlayRef.overlayElement.style.height = '15px';\r\n\r\n        // This should only re-align in the last position, even though the first would fit.\r\n        positionStrategy.recalculateLastPosition();\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.bottom)).toBe(Math.floor(originRect.top),\r\n            'Expected overlay to be re-aligned to the trigger in the previous position.');\r\n      });\r\n\r\n      it('should default to the initial position, if no positions fit in the viewport', () => {\r\n        // Make the origin element taller than the viewport.\r\n        originElement.style.height = '1000px';\r\n        originElement.style.top = '0';\r\n        originRect = originElement.getBoundingClientRect();\r\n\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'bottom'});\r\n\r\n        attachOverlay(positionStrategy);\r\n        positionStrategy.recalculateLastPosition();\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n\r\n        expect(Math.floor(overlayRect.bottom)).toBe(Math.floor(originRect.top),\r\n            'Expected overlay to be re-aligned to the trigger in the initial position.');\r\n      });\r\n\r\n      it('should position a panel properly when rtl', () => {\r\n        // must make the overlay longer than the origin to properly test attachment\r\n        originRect = originElement.getBoundingClientRect();\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'start', overlayY: 'top'})\r\n            .withDirection('rtl');\r\n\r\n        attachOverlay(positionStrategy);\r\n        overlayRef.overlayElement.style.width = `500px`;\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect.bottom));\r\n        expect(Math.floor(overlayRect.right)).toBe(Math.floor(originRect.right));\r\n      });\r\n\r\n      it('should position a panel with the x offset provided', () => {\r\n        originRect = originElement.getBoundingClientRect();\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'top'});\r\n\r\n        positionStrategy.withOffsetX(10);\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect.top));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect.left + 10));\r\n      });\r\n\r\n      it('should position a panel with the y offset provided', () => {\r\n        originRect = originElement.getBoundingClientRect();\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'top'});\r\n\r\n        positionStrategy.withOffsetY(50);\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect.top + 50));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect.left));\r\n      });\r\n\r\n      it('should allow for the fallback positions to specify their own offsets', () => {\r\n        originElement.style.bottom = '0';\r\n        originElement.style.left = '50%';\r\n        originElement.style.position = 'fixed';\r\n        originRect = originElement.getBoundingClientRect();\r\n        positionStrategy = overlay.position()\r\n          .connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'top'})\r\n          .withFallbackPosition(\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'bottom'},\r\n            -100, -100);\r\n\r\n        positionStrategy.withOffsetY(50).withOffsetY(50);\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.bottom)).toBe(Math.floor(originRect.top - 100));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect.left - 100));\r\n      });\r\n\r\n    });\r\n\r\n    it('should emit onPositionChange event when position changes', () => {\r\n      originElement.style.top = '200px';\r\n      originElement.style.right = '25px';\r\n\r\n      positionStrategy = overlay.position().connectedTo(\r\n          fakeElementRef,\r\n          {originX: 'end', originY: 'center'},\r\n          {overlayX: 'start', overlayY: 'center'})\r\n          .withFallbackPosition(\r\n              {originX: 'start', originY: 'bottom'},\r\n              {overlayX: 'end', overlayY: 'top'});\r\n\r\n      const positionChangeHandler = jasmine.createSpy('positionChangeHandler');\r\n      const subscription = positionStrategy.onPositionChange.subscribe(positionChangeHandler);\r\n\r\n      attachOverlay(positionStrategy);\r\n\r\n      const latestCall = positionChangeHandler.calls.mostRecent();\r\n\r\n      expect(positionChangeHandler).toHaveBeenCalled();\r\n      expect(latestCall.args[0] instanceof ConnectedOverlayPositionChange)\r\n          .toBe(true, `Expected strategy to emit an instance of ConnectedOverlayPositionChange.`);\r\n\r\n      // If the strategy is re-applied and the initial position would now fit,\r\n      // the position change event should be emitted again.\r\n      originElement.style.top = '200px';\r\n      originElement.style.left = '200px';\r\n\r\n      positionStrategy.apply();\r\n\r\n      expect(positionChangeHandler).toHaveBeenCalledTimes(2);\r\n\r\n      subscription.unsubscribe();\r\n    });\r\n\r\n    it('should emit the onPositionChange event even if none of the positions fit', () => {\r\n      originElement.style.bottom = '25px';\r\n      originElement.style.right = '25px';\r\n\r\n      positionStrategy = overlay.position().connectedTo(\r\n          fakeElementRef,\r\n          {originX: 'end', originY: 'bottom'},\r\n          {overlayX: 'start', overlayY: 'top'})\r\n          .withFallbackPosition(\r\n              {originX: 'start', originY: 'bottom'},\r\n              {overlayX: 'end', overlayY: 'top'});\r\n\r\n      const positionChangeHandler = jasmine.createSpy('positionChangeHandler');\r\n      const subscription = positionStrategy.onPositionChange.subscribe(positionChangeHandler);\r\n\r\n      attachOverlay(positionStrategy);\r\n\r\n      expect(positionChangeHandler).toHaveBeenCalled();\r\n\r\n      subscription.unsubscribe();\r\n    });\r\n\r\n    it('should complete the onPositionChange stream on dispose', () => {\r\n      positionStrategy = overlay.position().connectedTo(\r\n          fakeElementRef,\r\n          {originX: 'end', originY: 'bottom'},\r\n          {overlayX: 'start', overlayY: 'top'});\r\n\r\n      const completeHandler = jasmine.createSpy('complete handler');\r\n\r\n      positionStrategy.onPositionChange.subscribe(undefined, undefined, completeHandler);\r\n      attachOverlay(positionStrategy);\r\n      positionStrategy.dispose();\r\n\r\n      expect(completeHandler).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should pick the fallback position that shows the largest area of the element', () => {\r\n      originElement.style.top = '200px';\r\n      originElement.style.right = '25px';\r\n      originRect = originElement.getBoundingClientRect();\r\n\r\n      positionStrategy = overlay.position().connectedTo(\r\n          fakeElementRef,\r\n          {originX: 'end', originY: 'center'},\r\n          {overlayX: 'start', overlayY: 'center'})\r\n          .withFallbackPosition(\r\n              {originX: 'end', originY: 'top'},\r\n              {overlayX: 'start', overlayY: 'bottom'})\r\n          .withFallbackPosition(\r\n              {originX: 'end', originY: 'top'},\r\n              {overlayX: 'end', overlayY: 'top'});\r\n\r\n      attachOverlay(positionStrategy);\r\n\r\n      let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n\r\n      expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect.top));\r\n      expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect.left));\r\n    });\r\n\r\n    it('should re-use the preferred position when re-applying while locked in', () => {\r\n      positionStrategy = overlay.position().connectedTo(\r\n          fakeElementRef,\r\n          {originX: 'end', originY: 'center'},\r\n          {overlayX: 'start', overlayY: 'center'})\r\n          .withLockedPosition(true)\r\n          .withFallbackPosition(\r\n              {originX: 'start', originY: 'bottom'},\r\n              {overlayX: 'end', overlayY: 'top'});\r\n\r\n      const recalcSpy = spyOn(positionStrategy._positionStrategy, 'reapplyLastPosition');\r\n\r\n      attachOverlay(positionStrategy);\r\n\r\n      expect(recalcSpy).not.toHaveBeenCalled();\r\n\r\n      positionStrategy.apply();\r\n\r\n      expect(recalcSpy).toHaveBeenCalled();\r\n    });\r\n\r\n    /**\r\n     * Run all tests for connecting the overlay to the origin such that first preferred\r\n     * position does not go off-screen. We do this because there are several cases where we\r\n     * want to run the exact same tests with different preconditions (e.g., not scroll, scrolled,\r\n     * different element sized, etc.).\r\n     */\r\n    function runSimplePositionTests() {\r\n      it('should position a panel below, left-aligned', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'start', overlayY: 'top'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect!.bottom));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect!.left));\r\n      });\r\n\r\n      it('should position to the right, center aligned vertically', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'end', originY: 'center'},\r\n            {overlayX: 'start', overlayY: 'center'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originCenterY! - (OVERLAY_HEIGHT / 2)));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect!.right));\r\n      });\r\n\r\n      it('should position to the left, below', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'end', overlayY: 'top'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect!.bottom));\r\n        expect(Math.round(overlayRect.right)).toBe(Math.round(originRect!.left));\r\n      });\r\n\r\n      it('should position above, right aligned', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'end', originY: 'top'},\r\n            {overlayX: 'end', overlayY: 'bottom'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.round(overlayRect.bottom)).toBe(Math.round(originRect!.top));\r\n        expect(Math.round(overlayRect.right)).toBe(Math.round(originRect!.right));\r\n      });\r\n\r\n      it('should position below, centered', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'center', originY: 'bottom'},\r\n            {overlayX: 'center', overlayY: 'top'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect!.bottom));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originCenterX! - (OVERLAY_WIDTH / 2)));\r\n      });\r\n\r\n      it('should center the overlay on the origin', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'center', originY: 'center'},\r\n            {overlayX: 'center', overlayY: 'center'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect!.top));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect!.left));\r\n      });\r\n\r\n      it('should allow for the positions to be updated after init', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'start', overlayY: 'top'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        let overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect!.bottom));\r\n        expect(Math.floor(overlayRect.left)).toBe(Math.floor(originRect!.left));\r\n\r\n        positionStrategy.withPositions([new ConnectionPositionPair(\r\n          {originX: 'start', originY: 'bottom'},\r\n          {overlayX: 'end', overlayY: 'top'}\r\n        )]);\r\n\r\n        positionStrategy.apply();\r\n\r\n        overlayRect = overlayRef.overlayElement.getBoundingClientRect();\r\n        expect(Math.floor(overlayRect.top)).toBe(Math.floor(originRect!.bottom));\r\n        expect(Math.floor(overlayRect.right)).toBe(Math.floor(originRect!.left));\r\n      });\r\n\r\n    }\r\n  });\r\n\r\n  describe('onPositionChange with scrollable view properties', () => {\r\n    let scrollable: HTMLDivElement;\r\n    let positionChangeHandler: jasmine.Spy;\r\n    let onPositionChangeSubscription: Subscription;\r\n    let positionChange: ConnectedOverlayPositionChange;\r\n    let fakeElementRef: ElementRef;\r\n    let positionStrategy: ConnectedPositionStrategy;\r\n\r\n    beforeEach(() => {\r\n      // Set up the origin\r\n      let originElement = createBlockElement();\r\n      originElement.style.margin = '0 1000px 1000px 0';  // Added so that the container scrolls\r\n\r\n      // Create a scrollable container and put the origin inside\r\n      scrollable = createOverflowContainerElement();\r\n      document.body.appendChild(scrollable);\r\n      scrollable.appendChild(originElement);\r\n\r\n      // Create a strategy with knowledge of the scrollable container\r\n      fakeElementRef = new ElementRef(originElement);\r\n      positionStrategy = overlay.position().connectedTo(\r\n          fakeElementRef,\r\n          {originX: 'start', originY: 'bottom'},\r\n          {overlayX: 'start', overlayY: 'top'});\r\n\r\n      positionStrategy.withScrollableContainers([\r\n          new CdkScrollable(new ElementRef(scrollable), null!, null!)]);\r\n      positionChangeHandler = jasmine.createSpy('positionChangeHandler');\r\n      onPositionChangeSubscription =\r\n          positionStrategy.onPositionChange.subscribe(positionChangeHandler);\r\n      attachOverlay(positionStrategy);\r\n    });\r\n\r\n    afterEach(() => {\r\n      onPositionChangeSubscription.unsubscribe();\r\n      document.body.removeChild(scrollable);\r\n    });\r\n\r\n    it('should not have origin or overlay clipped or out of view without scroll', () => {\r\n      expect(positionChangeHandler).toHaveBeenCalled();\r\n      positionChange = positionChangeHandler.calls.mostRecent().args[0];\r\n      expect(positionChange.scrollableViewProperties).toEqual({\r\n        isOriginClipped: false,\r\n        isOriginOutsideView: false,\r\n        isOverlayClipped: false,\r\n        isOverlayOutsideView: false\r\n      });\r\n    });\r\n\r\n    it('should evaluate if origin is clipped if scrolled slightly down', () => {\r\n      scrollable.scrollTop = 10;  // Clip the origin by 10 pixels\r\n      positionStrategy.apply();\r\n\r\n      expect(positionChangeHandler).toHaveBeenCalled();\r\n      positionChange = positionChangeHandler.calls.mostRecent().args[0];\r\n      expect(positionChange.scrollableViewProperties).toEqual({\r\n        isOriginClipped: true,\r\n        isOriginOutsideView: false,\r\n        isOverlayClipped: false,\r\n        isOverlayOutsideView: false\r\n      });\r\n    });\r\n\r\n    it('should evaluate if origin is out of view and overlay is clipped if scrolled enough', () => {\r\n      scrollable.scrollTop = 31;  // Origin is 30 pixels, move out of view and clip the overlay 1px\r\n      positionStrategy.apply();\r\n\r\n      expect(positionChangeHandler).toHaveBeenCalled();\r\n      positionChange = positionChangeHandler.calls.mostRecent().args[0];\r\n      expect(positionChange.scrollableViewProperties).toEqual({\r\n        isOriginClipped: true,\r\n        isOriginOutsideView: true,\r\n        isOverlayClipped: true,\r\n        isOverlayOutsideView: false\r\n      });\r\n    });\r\n\r\n    it('should evaluate the overlay and origin are both out of the view', () => {\r\n      scrollable.scrollTop = 61;  // Scroll by overlay height + origin height + 1px buffer\r\n      positionStrategy.apply();\r\n\r\n      expect(positionChangeHandler).toHaveBeenCalled();\r\n      positionChange = positionChangeHandler.calls.mostRecent().args[0];\r\n      expect(positionChange.scrollableViewProperties).toEqual({\r\n        isOriginClipped: true,\r\n        isOriginOutsideView: true,\r\n        isOverlayClipped: true,\r\n        isOverlayOutsideView: true\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('positioning properties', () => {\r\n    let originElement: HTMLElement;\r\n    let positionStrategy: ConnectedPositionStrategy;\r\n    let fakeElementRef: ElementRef;\r\n\r\n    beforeEach(() => {\r\n      // The origin and overlay elements need to be in the document body in order to have geometry.\r\n      originElement = createPositionedBlockElement();\r\n      document.body.appendChild(originElement);\r\n      fakeElementRef = new ElementRef(originElement);\r\n    });\r\n\r\n    afterEach(() => {\r\n      document.body.removeChild(originElement);\r\n    });\r\n\r\n    describe('in ltr', () => {\r\n      it('should use `left` when positioning an element at the start', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'top'});\r\n\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        expect(overlayRef.overlayElement.style.left).toBeTruthy();\r\n        expect(overlayRef.overlayElement.style.right).toBeFalsy();\r\n      });\r\n\r\n      it('should use `right` when positioning an element at the end', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'end', originY: 'top'},\r\n            {overlayX: 'end', overlayY: 'top'});\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        expect(overlayRef.overlayElement.style.right).toBeTruthy();\r\n        expect(overlayRef.overlayElement.style.left).toBeFalsy();\r\n      });\r\n\r\n    });\r\n\r\n    describe('in rtl', () => {\r\n      it('should use `right` when positioning an element at the start', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'top'}\r\n        )\r\n        .withDirection('rtl');\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        expect(overlayRef.overlayElement.style.right).toBeTruthy();\r\n        expect(overlayRef.overlayElement.style.left).toBeFalsy();\r\n      });\r\n\r\n      it('should use `left` when positioning an element at the end', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'end', originY: 'top'},\r\n            {overlayX: 'end', overlayY: 'top'}\r\n        ).withDirection('rtl');\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        expect(overlayRef.overlayElement.style.left).toBeTruthy();\r\n        expect(overlayRef.overlayElement.style.right).toBeFalsy();\r\n      });\r\n    });\r\n\r\n    describe('vertical', () => {\r\n      it('should use `top` when positioning at element along the top', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'top'},\r\n            {overlayX: 'start', overlayY: 'top'}\r\n        );\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        expect(overlayRef.overlayElement.style.top).toBeTruthy();\r\n        expect(overlayRef.overlayElement.style.bottom).toBeFalsy();\r\n      });\r\n\r\n      it('should use `bottom` when positioning at element along the bottom', () => {\r\n        positionStrategy = overlay.position().connectedTo(\r\n            fakeElementRef,\r\n            {originX: 'start', originY: 'bottom'},\r\n            {overlayX: 'start', overlayY: 'bottom'}\r\n        );\r\n\r\n        attachOverlay(positionStrategy);\r\n\r\n        expect(overlayRef.overlayElement.style.bottom).toBeTruthy();\r\n        expect(overlayRef.overlayElement.style.top).toBeFalsy();\r\n      });\r\n    });\r\n\r\n  });\r\n\r\n});\r\n\r\n/** Creates an absolutely positioned, display: block element with a default size. */\r\nfunction createPositionedBlockElement() {\r\n  let element = createBlockElement();\r\n  element.style.position = 'absolute';\r\n  return element;\r\n}\r\n\r\n/** Creates a block element with a default size. */\r\nfunction createBlockElement() {\r\n  let element = document.createElement('div');\r\n  element.style.width = `${DEFAULT_WIDTH}px`;\r\n  element.style.height = `${DEFAULT_HEIGHT}px`;\r\n  element.style.backgroundColor = 'rebeccapurple';\r\n  element.style.zIndex = '100';\r\n  return element;\r\n}\r\n\r\n/** Creates an overflow container with a set height and width with margin. */\r\nfunction createOverflowContainerElement() {\r\n  let element = document.createElement('div');\r\n  element.style.position = 'relative';\r\n  element.style.overflow = 'auto';\r\n  element.style.height = '300px';\r\n  element.style.width = '300px';\r\n  element.style.margin = '100px';\r\n  return element;\r\n}\r\n\r\n\r\n@Component({\r\n  template: `<div style=\"width: ${DEFAULT_WIDTH}px; height: ${DEFAULT_HEIGHT}px;\"></div>`\r\n})\r\nclass TestOverlay { }\r\n\r\n\r\n@NgModule({\r\n  imports: [OverlayModule, PortalModule],\r\n  exports: [TestOverlay],\r\n  declarations: [TestOverlay],\r\n  entryComponents: [TestOverlay],\r\n})\r\nclass OverlayTestModule { }\r\n"]}