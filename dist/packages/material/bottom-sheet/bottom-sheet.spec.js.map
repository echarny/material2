{"version":3,"file":"bottom-sheet.spec.js","sourceRoot":"","sources":["../../../../src/lib/bottom-sheet/bottom-sheet.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import {Directionality} from '@angular/cdk/bidi';\r\nimport {A, ESCAPE} from '@angular/cdk/keycodes';\r\nimport {OverlayContainer, ViewportRuler} from '@angular/cdk/overlay';\r\nimport {dispatchKeyboardEvent} from '@angular/cdk/testing';\r\nimport {\r\n  Component,\r\n  Directive,\r\n  Inject,\r\n  Injector,\r\n  NgModule,\r\n  TemplateRef,\r\n  ViewChild,\r\n  ViewContainerRef,\r\n} from '@angular/core';\r\nimport {\r\n  ComponentFixture,\r\n  fakeAsync,\r\n  flush,\r\n  flushMicrotasks,\r\n  inject,\r\n  TestBed,\r\n  tick,\r\n} from '@angular/core/testing';\r\nimport {Location} from '@angular/common';\r\nimport {SpyLocation} from '@angular/common/testing';\r\nimport {NoopAnimationsModule} from '@angular/platform-browser/animations';\r\nimport {MatBottomSheet} from './bottom-sheet';\r\nimport {MAT_BOTTOM_SHEET_DATA, MatBottomSheetConfig} from './bottom-sheet-config';\r\nimport {MatBottomSheetModule} from './bottom-sheet-module';\r\nimport {MatBottomSheetRef} from './bottom-sheet-ref';\r\n\r\n\r\ndescribe('MatBottomSheet', () => {\r\n  let bottomSheet: MatBottomSheet;\r\n  let overlayContainer: OverlayContainer;\r\n  let overlayContainerElement: HTMLElement;\r\n  let viewportRuler: ViewportRuler;\r\n\r\n  let testViewContainerRef: ViewContainerRef;\r\n  let viewContainerFixture: ComponentFixture<ComponentWithChildViewContainer>;\r\n  let mockLocation: SpyLocation;\r\n\r\n  beforeEach(fakeAsync(() => {\r\n    TestBed\r\n      .configureTestingModule({\r\n        imports: [MatBottomSheetModule, BottomSheetTestModule],\r\n        providers: [{provide: Location, useClass: SpyLocation}]\r\n      })\r\n      .compileComponents();\r\n  }));\r\n\r\n  beforeEach(inject([MatBottomSheet, OverlayContainer, ViewportRuler, Location],\r\n    (bs: MatBottomSheet, oc: OverlayContainer, vr: ViewportRuler, l: Location) => {\r\n      bottomSheet = bs;\r\n      overlayContainer = oc;\r\n      viewportRuler = vr;\r\n      overlayContainerElement = oc.getContainerElement();\r\n      mockLocation = l as SpyLocation;\r\n    }));\r\n\r\n  afterEach(() => {\r\n    overlayContainer.ngOnDestroy();\r\n  });\r\n\r\n  beforeEach(() => {\r\n    viewContainerFixture = TestBed.createComponent(ComponentWithChildViewContainer);\r\n\r\n    viewContainerFixture.detectChanges();\r\n    testViewContainerRef = viewContainerFixture.componentInstance.childViewContainer;\r\n  });\r\n\r\n  it('should open a bottom sheet with a component', () => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg, {viewContainerRef: testViewContainerRef});\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    expect(overlayContainerElement.textContent).toContain('Pizza');\r\n    expect(bottomSheetRef.instance instanceof PizzaMsg).toBe(true);\r\n    expect(bottomSheetRef.instance.bottomSheetRef).toBe(bottomSheetRef);\r\n  });\r\n\r\n  it('should open a bottom sheet with a template', () => {\r\n    const templateRefFixture = TestBed.createComponent(ComponentWithTemplateRef);\r\n    templateRefFixture.componentInstance.localValue = 'Bees';\r\n    templateRefFixture.detectChanges();\r\n\r\n    const bottomSheetRef = bottomSheet.open(templateRefFixture.componentInstance.templateRef, {\r\n      data: {value: 'Knees'}\r\n    });\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    expect(overlayContainerElement.textContent).toContain('Cheese Bees Knees');\r\n    expect(templateRefFixture.componentInstance.bottomSheetRef).toBe(bottomSheetRef);\r\n  });\r\n\r\n  it('should position the bottom sheet at the bottom center of the screen', () => {\r\n    bottomSheet.open(PizzaMsg, {viewContainerRef: testViewContainerRef});\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    const containerElement = overlayContainerElement.querySelector('mat-bottom-sheet-container')!;\r\n    const containerRect = containerElement.getBoundingClientRect();\r\n    const viewportSize = viewportRuler.getViewportSize();\r\n\r\n    expect(Math.floor(containerRect.bottom)).toBe(Math.floor(viewportSize.height));\r\n    expect(Math.floor(containerRect.left + containerRect.width / 2))\r\n        .toBe(Math.floor(viewportSize.width / 2));\r\n  });\r\n\r\n  it('should emit when the bottom sheet opening animation is complete', fakeAsync(() => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg, {viewContainerRef: testViewContainerRef});\r\n    const spy = jasmine.createSpy('afterOpened spy');\r\n\r\n    bottomSheetRef.afterOpened().subscribe(spy);\r\n    viewContainerFixture.detectChanges();\r\n\r\n    // callback should not be called before animation is complete\r\n    expect(spy).not.toHaveBeenCalled();\r\n\r\n    flushMicrotasks();\r\n    expect(spy).toHaveBeenCalled();\r\n  }));\r\n\r\n  it('should use the correct injector', () => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg, {viewContainerRef: testViewContainerRef});\r\n    viewContainerFixture.detectChanges();\r\n    const injector = bottomSheetRef.instance.injector;\r\n\r\n    expect(bottomSheetRef.instance.bottomSheetRef).toBe(bottomSheetRef);\r\n    expect(injector.get<DirectiveWithViewContainer>(DirectiveWithViewContainer)).toBeTruthy();\r\n  });\r\n\r\n  it('should open a bottom sheet with a component and no ViewContainerRef', () => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg);\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    expect(overlayContainerElement.textContent).toContain('Pizza');\r\n    expect(bottomSheetRef.instance instanceof PizzaMsg).toBe(true);\r\n    expect(bottomSheetRef.instance.bottomSheetRef).toBe(bottomSheetRef);\r\n  });\r\n\r\n  it('should apply the correct role to the container element', () => {\r\n    bottomSheet.open(PizzaMsg);\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    const containerElement = overlayContainerElement.querySelector('mat-bottom-sheet-container')!;\r\n    expect(containerElement.getAttribute('role')).toBe('dialog');\r\n  });\r\n\r\n  it('should close a bottom sheet via the escape key', fakeAsync(() => {\r\n    bottomSheet.open(PizzaMsg, {viewContainerRef: testViewContainerRef});\r\n\r\n    dispatchKeyboardEvent(document.body, 'keydown', ESCAPE);\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeNull();\r\n  }));\r\n\r\n  it('should close when clicking on the overlay backdrop', fakeAsync(() => {\r\n    bottomSheet.open(PizzaMsg, {\r\n      viewContainerRef: testViewContainerRef\r\n    });\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    let backdrop = overlayContainerElement.querySelector('.cdk-overlay-backdrop') as HTMLElement;\r\n\r\n    backdrop.click();\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeFalsy();\r\n  }));\r\n\r\n  it('should emit the backdropClick stream when clicking on the overlay backdrop', fakeAsync(() => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg, {viewContainerRef: testViewContainerRef});\r\n    const spy = jasmine.createSpy('backdropClick spy');\r\n\r\n    bottomSheetRef.backdropClick().subscribe(spy);\r\n    viewContainerFixture.detectChanges();\r\n\r\n    const backdrop = overlayContainerElement.querySelector('.cdk-overlay-backdrop') as HTMLElement;\r\n\r\n    backdrop.click();\r\n    expect(spy).toHaveBeenCalledTimes(1);\r\n\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    // Additional clicks after the bottom sheet was closed should not be emitted\r\n    backdrop.click();\r\n    expect(spy).toHaveBeenCalledTimes(1);\r\n  }));\r\n\r\n  it('should emit the keyboardEvent stream when key events target the overlay', fakeAsync(() => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg, {viewContainerRef: testViewContainerRef});\r\n    const spy = jasmine.createSpy('keyboardEvent spy');\r\n\r\n    bottomSheetRef.keydownEvents().subscribe(spy);\r\n    viewContainerFixture.detectChanges();\r\n\r\n    const backdrop = overlayContainerElement.querySelector('.cdk-overlay-backdrop') as HTMLElement;\r\n    const container =\r\n        overlayContainerElement.querySelector('mat-bottom-sheet-container') as HTMLElement;\r\n    dispatchKeyboardEvent(document.body, 'keydown', A);\r\n    dispatchKeyboardEvent(document.body, 'keydown', A, backdrop);\r\n    dispatchKeyboardEvent(document.body, 'keydown', A, container);\r\n\r\n    expect(spy).toHaveBeenCalledTimes(3);\r\n  }));\r\n\r\n  it('should allow setting the layout direction', () => {\r\n    bottomSheet.open(PizzaMsg, {direction: 'rtl'});\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    let overlayPane = overlayContainerElement.querySelector('.cdk-global-overlay-wrapper')!;\r\n\r\n    expect(overlayPane.getAttribute('dir')).toBe('rtl');\r\n  });\r\n\r\n  it('should inject the correct direction in the instantiated component', () => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg, {direction: 'rtl'});\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    expect(bottomSheetRef.instance.directionality.value).toBe('rtl');\r\n  });\r\n\r\n  it('should fall back to injecting the global direction if none is passed by the config', () => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg, {});\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    expect(bottomSheetRef.instance.directionality.value).toBe('ltr');\r\n  });\r\n\r\n  it('should be able to set a custom panel class', () => {\r\n    bottomSheet.open(PizzaMsg, {\r\n      panelClass: 'custom-panel-class',\r\n      viewContainerRef: testViewContainerRef\r\n    });\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    expect(overlayContainerElement.querySelector('.custom-panel-class')).toBeTruthy();\r\n  });\r\n\r\n  it('should be able to set a custom aria-label', () => {\r\n    bottomSheet.open(PizzaMsg, {\r\n      ariaLabel: 'Hello there',\r\n      viewContainerRef: testViewContainerRef\r\n    });\r\n    viewContainerFixture.detectChanges();\r\n\r\n    const container = overlayContainerElement.querySelector('mat-bottom-sheet-container')!;\r\n    expect(container.getAttribute('aria-label')).toBe('Hello there');\r\n  });\r\n\r\n  it('should be able to get dismissed through the service', fakeAsync(() => {\r\n    bottomSheet.open(PizzaMsg);\r\n    viewContainerFixture.detectChanges();\r\n    expect(overlayContainerElement.childElementCount).toBeGreaterThan(0);\r\n\r\n    bottomSheet.dismiss();\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(overlayContainerElement.childElementCount).toBe(0);\r\n  }));\r\n\r\n  it('should open a new bottom sheet after dismissing a previous sheet', fakeAsync(() => {\r\n    let config: MatBottomSheetConfig = {viewContainerRef: testViewContainerRef};\r\n    let bottomSheetRef: MatBottomSheetRef<any> = bottomSheet.open(PizzaMsg, config);\r\n\r\n    viewContainerFixture.detectChanges();\r\n\r\n    bottomSheetRef.dismiss();\r\n    viewContainerFixture.detectChanges();\r\n\r\n    // Wait for the dismiss animation to finish.\r\n    flush();\r\n    bottomSheetRef = bottomSheet.open(TacoMsg, config);\r\n    viewContainerFixture.detectChanges();\r\n\r\n    // Wait for the open animation to finish.\r\n    flush();\r\n    expect(bottomSheetRef.containerInstance._animationState)\r\n        .toBe('visible', `Expected the animation state would be 'visible'.`);\r\n  }));\r\n\r\n  it('should remove past bottom sheets when opening new ones', fakeAsync(() => {\r\n    bottomSheet.open(PizzaMsg);\r\n    viewContainerFixture.detectChanges();\r\n\r\n    bottomSheet.open(TacoMsg);\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(overlayContainerElement.textContent).toContain('Taco');\r\n  }));\r\n\r\n  it('should not throw when opening multiple bottom sheet in quick succession', fakeAsync(() => {\r\n    expect(() => {\r\n      for (let i = 0; i < 3; i++) {\r\n        bottomSheet.open(PizzaMsg);\r\n        viewContainerFixture.detectChanges();\r\n      }\r\n\r\n      flush();\r\n    }).not.toThrow();\r\n  }));\r\n\r\n  it('should remove bottom sheet if another is shown while its still animating open',\r\n    fakeAsync(() => {\r\n      bottomSheet.open(PizzaMsg);\r\n      viewContainerFixture.detectChanges();\r\n\r\n      bottomSheet.open(TacoMsg);\r\n      viewContainerFixture.detectChanges();\r\n\r\n      tick();\r\n      expect(overlayContainerElement.textContent).toContain('Taco');\r\n      tick(500);\r\n    }));\r\n\r\n  it('should emit after being dismissed', fakeAsync(() => {\r\n    const bottomSheetRef = bottomSheet.open(PizzaMsg);\r\n    const spy = jasmine.createSpy('afterDismissed spy');\r\n\r\n    bottomSheetRef.afterDismissed().subscribe(spy);\r\n    viewContainerFixture.detectChanges();\r\n\r\n    bottomSheetRef.dismiss();\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(spy).toHaveBeenCalledTimes(1);\r\n  }));\r\n\r\n  it('should be able to pass a result back to the dismissed stream', fakeAsync(() => {\r\n    const bottomSheetRef = bottomSheet.open<PizzaMsg, any, number>(PizzaMsg);\r\n    const spy = jasmine.createSpy('afterDismissed spy');\r\n\r\n    bottomSheetRef.afterDismissed().subscribe(spy);\r\n    viewContainerFixture.detectChanges();\r\n\r\n    bottomSheetRef.dismiss(1337);\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(spy).toHaveBeenCalledWith(1337);\r\n  }));\r\n\r\n  it('should close the bottom sheet when going forwards/backwards in history', fakeAsync(() => {\r\n    bottomSheet.open(PizzaMsg);\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeTruthy();\r\n\r\n    mockLocation.simulateUrlPop('');\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeFalsy();\r\n  }));\r\n\r\n  it('should close the bottom sheet when the location hash changes', fakeAsync(() => {\r\n    bottomSheet.open(PizzaMsg);\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeTruthy();\r\n\r\n    mockLocation.simulateHashChange('');\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeFalsy();\r\n  }));\r\n\r\n  it('should allow the consumer to disable closing a bottom sheet on navigation', fakeAsync(() => {\r\n    bottomSheet.open(PizzaMsg, {closeOnNavigation: false});\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeTruthy();\r\n\r\n    mockLocation.simulateUrlPop('');\r\n    viewContainerFixture.detectChanges();\r\n    flush();\r\n\r\n    expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeTruthy();\r\n  }));\r\n\r\n  describe('passing in data', () => {\r\n    it('should be able to pass in data', () => {\r\n      const config = {\r\n        data: {\r\n          stringParam: 'hello',\r\n          dateParam: new Date()\r\n        }\r\n      };\r\n\r\n      const instance = bottomSheet.open(BottomSheetWithInjectedData, config).instance;\r\n\r\n      expect(instance.data.stringParam).toBe(config.data.stringParam);\r\n      expect(instance.data.dateParam).toBe(config.data.dateParam);\r\n    });\r\n\r\n    it('should default to null if no data is passed', () => {\r\n      expect(() => {\r\n        const bottomSheetRef = bottomSheet.open(BottomSheetWithInjectedData);\r\n        expect(bottomSheetRef.instance.data).toBeNull();\r\n      }).not.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('disableClose option', () => {\r\n    it('should prevent closing via clicks on the backdrop', () => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        disableClose: true,\r\n        viewContainerRef: testViewContainerRef\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n\r\n      let backdrop = overlayContainerElement.querySelector('.cdk-overlay-backdrop') as HTMLElement;\r\n      backdrop.click();\r\n\r\n      expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeTruthy();\r\n    });\r\n\r\n    it('should prevent closing via the escape key', () => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        disableClose: true,\r\n        viewContainerRef: testViewContainerRef\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n      dispatchKeyboardEvent(document.body, 'keydown', ESCAPE);\r\n\r\n      expect(overlayContainerElement.querySelector('mat-bottom-sheet-container')).toBeTruthy();\r\n    });\r\n\r\n  });\r\n\r\n  describe('hasBackdrop option', () => {\r\n    it('should have a backdrop', () => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        hasBackdrop: true,\r\n        viewContainerRef: testViewContainerRef\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n\r\n      expect(overlayContainerElement.querySelector('.cdk-overlay-backdrop')).toBeTruthy();\r\n    });\r\n\r\n    it('should not have a backdrop', () => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        hasBackdrop: false,\r\n        viewContainerRef: testViewContainerRef\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n\r\n      expect(overlayContainerElement.querySelector('.cdk-overlay-backdrop')).toBeFalsy();\r\n    });\r\n  });\r\n\r\n  describe('backdropClass option', () => {\r\n    it('should have default backdrop class', () => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        backdropClass: '',\r\n        viewContainerRef: testViewContainerRef\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n\r\n      expect(overlayContainerElement.querySelector('.cdk-overlay-dark-backdrop')).toBeTruthy();\r\n    });\r\n\r\n    it('should have custom backdrop class', () => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        backdropClass: 'custom-backdrop-class',\r\n        viewContainerRef: testViewContainerRef\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n\r\n      expect(overlayContainerElement.querySelector('.custom-backdrop-class')).toBeTruthy();\r\n    });\r\n  });\r\n\r\n  describe('focus management', () => {\r\n    // When testing focus, all of the elements must be in the DOM.\r\n    beforeEach(() => document.body.appendChild(overlayContainerElement));\r\n    afterEach(() => document.body.removeChild(overlayContainerElement));\r\n\r\n    it('should focus the first tabbable element of the bottom sheet on open', fakeAsync(() => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        viewContainerRef: testViewContainerRef\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n      flushMicrotasks();\r\n\r\n      expect(document.activeElement.tagName)\r\n          .toBe('INPUT', 'Expected first tabbable element (input) in the sheet to be focused.');\r\n    }));\r\n\r\n    it('should allow disabling focus of the first tabbable element', fakeAsync(() => {\r\n      bottomSheet.open(PizzaMsg, {\r\n        viewContainerRef: testViewContainerRef,\r\n        autoFocus: false\r\n      });\r\n\r\n      viewContainerFixture.detectChanges();\r\n      flushMicrotasks();\r\n\r\n      expect(document.activeElement.tagName).not.toBe('INPUT');\r\n    }));\r\n\r\n    it('should re-focus trigger element when bottom sheet closes', fakeAsync(() => {\r\n      const button = document.createElement('button');\r\n      button.id = 'bottom-sheet-trigger';\r\n      document.body.appendChild(button);\r\n      button.focus();\r\n\r\n      const bottomSheetRef = bottomSheet.open(PizzaMsg, { viewContainerRef: testViewContainerRef });\r\n\r\n      flushMicrotasks();\r\n      viewContainerFixture.detectChanges();\r\n      flushMicrotasks();\r\n\r\n      expect(document.activeElement.id)\r\n          .not.toBe('bottom-sheet-trigger', 'Expected the focus to change when sheet was opened.');\r\n\r\n      bottomSheetRef.dismiss();\r\n      expect(document.activeElement.id).not.toBe('bottom-sheet-trigger',\r\n          'Expcted the focus not to have changed before the animation finishes.');\r\n\r\n      flushMicrotasks();\r\n      viewContainerFixture.detectChanges();\r\n      tick(500);\r\n\r\n      expect(document.activeElement.id).toBe('bottom-sheet-trigger',\r\n          'Expected that the trigger was refocused after the sheet is closed.');\r\n\r\n      document.body.removeChild(button);\r\n    }));\r\n\r\n  });\r\n\r\n});\r\n\r\ndescribe('MatBottomSheet with parent MatBottomSheet', () => {\r\n  let parentBottomSheet: MatBottomSheet;\r\n  let childBottomSheet: MatBottomSheet;\r\n  let overlayContainer: OverlayContainer;\r\n  let overlayContainerElement: HTMLElement;\r\n  let fixture: ComponentFixture<ComponentThatProvidesMatBottomSheet>;\r\n\r\n  beforeEach(fakeAsync(() => {\r\n    TestBed.configureTestingModule({\r\n      imports: [MatBottomSheetModule, BottomSheetTestModule, NoopAnimationsModule],\r\n      declarations: [ComponentThatProvidesMatBottomSheet],\r\n    }).compileComponents();\r\n  }));\r\n\r\n  beforeEach(inject([MatBottomSheet, OverlayContainer],\r\n    (bs: MatBottomSheet, oc: OverlayContainer) => {\r\n    parentBottomSheet = bs;\r\n    overlayContainer = oc;\r\n    overlayContainerElement = oc.getContainerElement();\r\n    fixture = TestBed.createComponent(ComponentThatProvidesMatBottomSheet);\r\n    childBottomSheet = fixture.componentInstance.bottomSheet;\r\n    fixture.detectChanges();\r\n  }));\r\n\r\n  afterEach(() => {\r\n    overlayContainer.ngOnDestroy();\r\n  });\r\n\r\n  it('should close bottom sheets opened by parent when opening from child', fakeAsync(() => {\r\n    parentBottomSheet.open(PizzaMsg);\r\n    fixture.detectChanges();\r\n    tick(1000);\r\n\r\n    expect(overlayContainerElement.textContent)\r\n        .toContain('Pizza', 'Expected a bottom sheet to be opened');\r\n\r\n    childBottomSheet.open(TacoMsg);\r\n    fixture.detectChanges();\r\n    tick(1000);\r\n\r\n    expect(overlayContainerElement.textContent)\r\n        .toContain('Taco', 'Expected parent bottom sheet to be dismissed by opening from child');\r\n  }));\r\n\r\n  it('should close bottom sheets opened by child when opening from parent', fakeAsync(() => {\r\n    childBottomSheet.open(PizzaMsg);\r\n    fixture.detectChanges();\r\n    tick(1000);\r\n\r\n    expect(overlayContainerElement.textContent)\r\n        .toContain('Pizza', 'Expected a bottom sheet to be opened');\r\n\r\n    parentBottomSheet.open(TacoMsg);\r\n    fixture.detectChanges();\r\n    tick(1000);\r\n\r\n    expect(overlayContainerElement.textContent)\r\n        .toContain('Taco', 'Expected child bottom sheet to be dismissed by opening from parent');\r\n  }));\r\n});\r\n\r\n\r\n@Directive({selector: 'dir-with-view-container'})\r\nclass DirectiveWithViewContainer {\r\n  constructor(public viewContainerRef: ViewContainerRef) { }\r\n}\r\n\r\n@Component({template: `<dir-with-view-container></dir-with-view-container>`})\r\nclass ComponentWithChildViewContainer {\r\n  @ViewChild(DirectiveWithViewContainer) childWithViewContainer: DirectiveWithViewContainer;\r\n\r\n  get childViewContainer() {\r\n    return this.childWithViewContainer.viewContainerRef;\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'arbitrary-component-with-template-ref',\r\n  template: `<ng-template let-data let-bottomSheetRef=\"bottomSheetRef\">\r\n      Cheese {{localValue}} {{data?.value}}{{setRef(bottomSheetRef)}}</ng-template>`,\r\n})\r\nclass ComponentWithTemplateRef {\r\n  localValue: string;\r\n  bottomSheetRef: MatBottomSheetRef<any>;\r\n\r\n  @ViewChild(TemplateRef) templateRef: TemplateRef<any>;\r\n\r\n  setRef(bottomSheetRef: MatBottomSheetRef<any>): string {\r\n    this.bottomSheetRef = bottomSheetRef;\r\n    return '';\r\n  }\r\n}\r\n\r\n@Component({template: '<p>Pizza</p> <input> <button>Close</button>'})\r\nclass PizzaMsg {\r\n  constructor(public bottomSheetRef: MatBottomSheetRef<PizzaMsg>,\r\n              public injector: Injector,\r\n              public directionality: Directionality) {}\r\n}\r\n\r\n@Component({template: '<p>Taco</p>'})\r\nclass TacoMsg {}\r\n\r\n@Component({\r\n  template: '',\r\n  providers: [MatBottomSheet]\r\n})\r\nclass ComponentThatProvidesMatBottomSheet {\r\n  constructor(public bottomSheet: MatBottomSheet) {}\r\n}\r\n\r\n@Component({template: ''})\r\nclass BottomSheetWithInjectedData {\r\n  constructor(@Inject(MAT_BOTTOM_SHEET_DATA) public data: any) { }\r\n}\r\n\r\n// Create a real (non-test) NgModule as a workaround for\r\n// https://github.com/angular/angular/issues/10760\r\nconst TEST_DIRECTIVES = [\r\n  ComponentWithChildViewContainer,\r\n  ComponentWithTemplateRef,\r\n  PizzaMsg,\r\n  TacoMsg,\r\n  DirectiveWithViewContainer,\r\n  BottomSheetWithInjectedData,\r\n];\r\n\r\n@NgModule({\r\n  imports: [MatBottomSheetModule, NoopAnimationsModule],\r\n  exports: TEST_DIRECTIVES,\r\n  declarations: TEST_DIRECTIVES,\r\n  entryComponents: [\r\n    ComponentWithChildViewContainer,\r\n    ComponentWithTemplateRef,\r\n    PizzaMsg,\r\n    TacoMsg,\r\n    BottomSheetWithInjectedData,\r\n  ],\r\n})\r\nclass BottomSheetTestModule { }\r\n"]}